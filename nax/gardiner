pushd "Composer/Bach, Johann Sebastian/All"
fl|grep Cant.*Gardiner|xargs -d\\n find -L|grep \\.mp4$|sed s_^./__|while read i; do echo "::$i"; f="${i#*/}"; f=${f%.mp4}; [ -e "${i%/*}/.$f.cpl" ] && (if grep -q '[^", -]\+[^"]*\(Classical \)\?Composer' "${i%/*}/.$f.cpl"; then sed 's/^.*\("\([^", -]\+\)[^"]*\(Classical \)\?Composer\).*$/\2\n/' "${i%/*}/.$f.cpl"; else echo; fi; sed 's/.*trackno="\([^"]*\)".*shorttracktitle="\([^"]*\)".*trackgroupname="\([^"]*\)"/"\3\n"\1\n"\2\n/;s/textdisplay=/\n/g' "${i%/*}/.$f.cpl" |grep ^\"|sed 's/^"//;/\//d'|sed 's/\(.*\), *BWV *\([0-9]*\)/Cantata \2: \1/'; echo "Gardiner; Monteverdi Choir"); done|~/bin/nax/cpld_straight.exe
popd
